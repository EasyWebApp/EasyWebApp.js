<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: view/TreeView.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: view/TreeView.js</h1>






    <section>
        <article>
            <pre class="prettyprint source linenums"><code>define(['jquery', './ListView'],  function ($, ListView) {

    /**
     * 树形视图类（对应 JSON 数组 + 对象）
     *
     * @author  TechQuery
     *
     * @class   TreeView
     * @extends ListView
     *
     * @param   {jQueryAcceptable} $_View  - Container DOM of TreeView
     * @param   {object}               [scope] - Data object as a scope
     *
     * @returns {TreeView}             Return the last one if a TreeView instance
     *                                 has been created on this element
     */

    function TreeView($_View, scope) {

        $_View = $( $_View );

        this.setPrivate('self',  $_View[0].cloneNode( true ));

        this.__self__.removeAttribute('id');

        $_View.children().append(this.__self__ = this.__self__.outerHTML);

        var _This_ = ListView.call(this, $_View, scope);

        if (_This_ !== this)  return _This_;
    }

    /**
     * 平铺数据 转换为 立体数据
     *
     * @author   TechQuery
     *
     * @memberof TreeView
     *
     * @param    {object[]} list               Flat Data of a Tree
     * @param    {string}   [child_key='list'] Key of a Tree Branch in HTML Template
     *
     * @returns  {object[]} 3D Data of a Tree
     */

    TreeView.fromFlat = function (list, child_key) {

        child_key = child_key || 'list';

        var TempMap = { };

        $.each($.extend(true, [ ], list),  function () {

            var _This_ = TempMap[ this.id ];

            _This_ = TempMap[ this.id ] = _This_ ?
                $.extend(this, _This_)  :  this;

            this.pid = this.pid || 0;

            var parent = TempMap[ this.pid ] = TempMap[ this.pid ]  ||  { };

            (parent[ child_key ] = parent[ child_key ]  ||  [ ]).push(_This_);
        });

        return  TempMap[0][ child_key ];
    };

    return  ListView.extend( TreeView );

});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-WebApp.html">WebApp</a></li></ul><h3>Externals</h3><ul><li><a href="external-_jQuery.fn_.html">jQuery.fn</a></li></ul><h3>Classes</h3><ul><li><a href="DataScope.html">DataScope</a></li><li><a href="HTMLView.html">HTMLView</a></li><li><a href="InnerLink.html">InnerLink</a></li><li><a href="ListView.html">ListView</a></li><li><a href="Observer.html">Observer</a></li><li><a href="RenderNode.html">RenderNode</a></li><li><a href="TreeView.html">TreeView</a></li><li><a href="View.html">View</a></li><li><a href="WebApp.html">WebApp</a></li></ul><h3>Events</h3><ul><li><a href="HTMLView.html#event:attach">attach</a></li><li><a href="HTMLView.html#event:update">update</a></li><li><a href="ListView.html#event:attach">attach</a></li><li><a href="ListView.html#event:update">update</a></li><li><a href="TreeView.html#event:attach">attach</a></li><li><a href="TreeView.html#event:update">update</a></li><li><a href="View.html#event:attach">attach</a></li><li><a href="View.html#event:update">update</a></li><li><a href="WebApp.html#event:data">data</a></li><li><a href="WebApp.html#event:ready">ready</a></li><li><a href="WebApp.html#event:request">request</a></li><li><a href="WebApp.html#event:route">route</a></li><li><a href="WebApp.html#event:template">template</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Oct 21 2017 06:48:34 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
